---
title: Linux
date: 2016-04-08 16:58:56
category: [note, linux, learning]
tags: [Linux, learning]
slug:
---

![linux](https://static1.makeuseofimages.com/wp-content/uploads/2015/01/best-linux-distros.jpg)

## Ubuntu22.04 ä¾èµ–é¡¹æ•´ç†
- vbox: libqt5opengl5
- kate: konsole
- Qt5.12.12: mesa-common-dev, libgl1-mesa-dev
- OpenCV4.6.0: libgtk2.0-dev, pkg-config, libcanberra-gtk-module
	- å¦‚æžœæ²¡æœ‰å®‰è£…è¿™ä¿©ä¾èµ–ä¸ä¼šå½±å“ç¼–è¯‘ï¼Œä½†æ˜¯ç¼–è¯‘åŽä¼šæœ‰åŠŸèƒ½æŸå¤±ï¼Œè¡¥å……å®‰è£…åŽä¸ä¼šä¿®å¤ï¼›
	- å¦‚æžœæƒ³ä¿®å¤ï¼Œåªèƒ½å®‰è£…åŽå†ç¼–è¯‘ä¸€æ¬¡ï¼›
## dpkg .deb
### Install
`sudo dpkg -i file.deb`
### c l r P L s
- `-c`åˆ—å‡ºå†…å®¹
- `-l`æå–åŒ…ä¿¡æ¯
- `-r`ç§»é™¤ä¸€ä¸ªå·²å®‰è£…çš„åŒ…
- `-P`å®Œå…¨æ¸…é™¤ä¸€ä¸ªå·²å®‰è£…åŒ…
- `-L`åˆ—å‡ºå®‰è£…æ‰€æœ‰æ–‡ä»¶æ¸…å•
- `-s`æ˜¾ç¤ºå·²å®‰è£…åŒ…ä¿¡æ¯

## WSL
[wslé—®é¢˜](https://github.com/IanVzs/ianvzs.github.io/issues/7)
å› ä¸ºåŽé¢ä¸å¤ªå–œæ¬¢è¿™ç§ä¸œè¥¿äº†,è¿˜æ˜¯ä¸Šäº†ç‰©ç†æœº. æ‰€ä»¥å°±ä¸ç²˜è´´è¿‡æ¥äº†.
## sudo apt upgrade
>E: Sub-process /usr/bin/dpkg returned an error code (1)

### è§£å†³
*suduä¸‹*
1. å¤‡ä»½`/var/lib/dpkg/info`
2. æ–°å»º`/var/lib/dpkg/info`
3. é‡æ–°æ‰§è¡Œæ›´æ–°
4. åˆå¹¶`/var/lib/dpkg/info` å’Œ å¤‡ä»½æ–‡ä»¶
5. å®Œ

### è¯´æ˜Ž
éžåŽŸç†æ€§è§£å†³æ–¹æ¡ˆ, è‹¥è§£å†³ä¸äº†, å¦å¯»ä»–æ³•æˆ–è€…éœ€è¦ç›´å‡»çµé­‚.


## ç£ç›˜æ“ä½œ
### NTFS
#### ä¸€èˆ¬å‘è¡Œç‰ˆ
åœ¨æ­¤ä¸­å¯ä»¥ä½¿ç”¨`ntfsfix`, ä¸è¿‡åˆšæ‰çœ‹äº†ä¸€åœˆå„¿, å¥½åƒ, è¿™å·¥å…·å°±æ˜¯æ¥æºäºŽä¸‹é¢æ‰€ä»‹ç»çš„
#### æ ‘èŽ“æ´¾
å› ä¸ºæ²¡æœ‰é¢„è£…`ntfsfix`, æ‰€ä»¥

- å®‰è£… `ntfs-3g` å¾ˆä¹…è¿œçš„å·¥å…·: `sudo apt install ntfs-3g` (çœ‹3gå°±çŸ¥é“å¹´ä»£ä¹…è¿œ ðŸ˜„)
- å–æ¶ˆæŒ‚è½½, `sudo umount /dev/sda{N}`
- é‡æ–°æŒ‚è½½, `mount â€“t ntfs /dev/sda{n} /media/pi`

å°±å¯ä»¥æœ‰`è¯»å†™`æƒé™äº†. ä¸ç„¶åªæœ‰è¯»çš„, æŒºä¸å¥½çš„.

ä¸è¿‡åœ¨windowsæ”¾äº†ç¼“å­˜åœ¨é‡Œé¢çš„è¯å°±æ²¡åŠžæ³•æŒ‚è½½ä¸º`å¯å†™`äº†ï¼Œ æ–¹æ³•æ˜¯å–æ¶ˆWinçš„å¿«é€Ÿå¯åŠ¨åŠŸèƒ½åŽå…³æœºï¼Œä¸ä½¿ç”¨ä¼‘çœ .

### ç£ç›˜æŸ¥è¯¢å‘½ä»¤
```bash
fdisk -l
df -h
```

LVMæ¦‚è¦ï¼ˆãŒã„ã‚ˆã†ï¼‰

**è‡ªå¼ã®ç†è§£**ï¼š
- å°†é›¶æ•£çš„é›†åˆèµ·æ¥ï¼Œå†è¿›è¡ŒåŠ¨æ€åˆ†ç»„ã€‚
- PV >> VG >> LV

### **ã˜ã‚ƒã‚ä½œæˆï¼ˆã•ãã›ã„ï¼‰**ï¼š
```bash
pvcreat disk1 disk2 di3 ...ã€€# é›†åˆ
pvs|pvdisplay

vgcreat é›†åˆname 1 2 3 ...  # é›†åˆ

vgs|vgdisplay

lvcreat -n name -L size é›†name 
lvs|lvdisplay
```

### **æ ¼å¼åŒ–ç£ç›˜:**
```bash
mkfs.ext4 /dev/é›†name/name  # æ ¼å¼åŒ–æ­¤ï¼ˆPSï¼šè·¯å¾„ä¸ºæ‰€ç¤ºï¼‰
```
**æ³¨:** ä¸è¿‡è¦é‡‡ç”¨è¿™ç§æ–¹æ³•æ¥ç»™Linuxæ‰©å®¹çš„è¯éœ€è¦ä¹‹å‰æ—¶å°±é€‰å®šLinuxç£ç›˜ç®¡ç†ä¸ºLVMï¼Œå¦åˆ™ä¸»ç›®å½•åœ¨ä¹‹åŽä¸èƒ½æ·»åŠ lvç»„ï¼Œä¹Ÿå°±è°ˆä¸ä¸Šæ·»åŠ ã€‚

### LVMã®å‰Šé™¤ï¼ˆã•ãã˜ã‚‡ï¼‰ï¼š
```bash
LV  lvremove /dev/... 
VG  vgremove é›†name
PV(ç‰©ç†å·) pvremove /dev/...
```

### disk LVã®è¿½åŠ ï¼ˆã¤ã„ã‹ï¼‰ï¼š
```bash
lvexpend -L +1G /dev/é›†name/name
# å¢žåŠ äº†ç©ºç™½ç©ºé—´

resize2fs /dev/... æ›´æ–°æ–‡ä»¶ç³»ç»Ÿ ä½¿ç©ºç™½ç©ºé—´å¾—ä»¥æœ‰èº«ä»½ï¼ˆæ–‡ä»¶ç³»ç»Ÿï¼‰
```

### disk VGã®è¿½åŠ 
```bash
pvcreat /dev/sdd(new)

vgexpend é›†name /dev/sdd
```

## ç½‘ç»œ
### SSH è¿œç¨‹ç»ˆç«¯æŽ§åˆ¶
`ssh root(usrname)@192.168.^.^   (IP)`
è¾“å…¥å¯†ç é”™è¯¯ä¹‹åŽâ€”â€”å°±â€¦ä¹‹å‰è§£å†³è¿‡ï¼Œç„¶è€Œå¿˜äº†ä¸Šæ¬¡æ€Žä¹ˆè§£å†³çš„äº†(äº¬ä¸œäº‘)åæ­£è¿™æ¬¡æ˜¯ç­‰ç€ç­‰ç€çªç„¶å°±èƒ½è¿žæŽ¥äº†ã€‚ ä»¥åŽå¯å¾—æŠŠè§£å†³æ–¹æ¡ˆè®°å½•åˆ°è¿™å„¿ãƒ½(*ã€‚>Ð”<)oã‚œ

å¦å¤–ï¼Œ`ssh`å…¬é’¥ðŸ”‘è¿žæŽ¥æ–¹å¼å¯ä»¥å‚è€ƒ`makethingseasy`ä¸­çš„æå†™ã€‚
### ping æµ‹è¯•è¿žé€š
mtr æµ‹è¯•ç½‘ç»œ+æ¯ä¸ªè·¯ç”±ä¿¡æ¯
`* + IP `

### VNC æ¡Œé¢è¿œç¨‹
Emmmm å½“æ—¶è¿˜å†™äº†è¿™ä¸ªï¼ŸçŽ°åœ¨å€’æ˜¯ç”¨è¿™ä¸ªåœ¨é“¾æŽ¥æ ‘èŽ“æ´¾o(âˆ©âˆ©)o...å“ˆå“ˆ(2021-04-22)

## å£“ç¸®æ‰“åŒ…
- `tar -zxvf **.tar.gz`: `.tar.gz`
- `tar -jxvf **.tar.bz2`: `.tar.bz2`
### tar
```shell
    tar xvzf fileName.tar.gz
    tar cvzf fileName.tar.gz targerName
```
`x`: è§£åŽ‹  `c` : åŽ‹ç¼©

## Ubuntu 16.04 å‡çº§ Ubuntu 18.04
___ ç»å°è¯•çœŸçš„ä¸å¦‚å¤‡ä»½è‡ªæˆ‘èµ„æ–™åŽé‡è£…â€¦â€¦å› ä¸ºå¤ªâ€¦æ…¢â€¦äº†â€¦   æ›´æ–°è¿˜ä¸ç¨³ã€‚
[^_^]:
    2018å¹´6æœˆ5æ—¥13ç‚¹44åˆ†

å…¶å®žè¿˜å¥½â€¦   å°±æ˜¯æ›´æ–°é€Ÿåº¦æ…¢äº†ç‚¹å„¿ã€‚æ—©ä¸åˆ°åç‚¹æ›´æ–°åˆ°äº†ä¸‹åˆ13ç‚¹38åˆ†ã€‚ä¸è¿‡åŸºäºŽæ˜¯ä¸€é”®å¼çš„æ‰€ä»¥è¿˜æ˜¯æœ‰å¤šç‚¹å„¿å¥½å¤„çš„ã€‚
æ›´æ–°å‘½ä»¤
```bash
sudo do-release-upgrade
# æç¤ºæ˜¯æ²¡æ³•æ‰¾åˆ°å¯ç”¨æ›´æ–°â€¦
# æ‰€ä»¥  ä¹‹åŽå¢žåŠ äº†
-c
# è¿˜æ˜¯ä¸è¡Œ
-d 
# å‚æ•°å®Œæˆæ›´æ–°
```
ä½†æ˜¯`python`è¢«é‡è£…äº†ï¼ï¼ï¼ï¼ é‡Œé¢çš„åŒ…éƒ½æ²¡äº†â€¦ðŸŽaç®—äº†ï¼Œå¥½åœ¨è½¯ä»¶çº§åˆ«çš„ä¸œè¥¿éƒ½è¿˜åœ¨â€¦å¦å¤–`pip`ä¹ŸæŸåäº†ï¼Œ`apt`å®‰è£…ä¹Ÿå¤±è´¥ï¼ŒåŽé¢æˆ‘å°±ç”¨äº†`.py`è„šæœ¬é‡æ–°å®‰è£…ï¼Œæ‰€ä»¥`apt`å¸è½½å†é‡è£…æ²¡è¯•ï¼Œä¸çŸ¥é“è¡Œä¸è¡Œã€‚ æ”¶å›žå‰é¢â€œè½¯ä»¶çº§åˆ«çš„éƒ½è¿˜åœ¨â€ï¼Œå…¶å®žè½¯ä»¶çº§åˆ«çš„ä¹Ÿå¾…æµ‹ã€‚

## è®¾å®šç³»ç»Ÿå¸¸é‡
åœ¨ç”¨æˆ·ç›®å½•ä¸‹`profile`æ–‡ä»¶ä¸­å¯é€šè¿‡`export` å¢žåŠ (ä¸€èˆ¬æ¥è¯´æ˜¯å¢žåŠ è·¯å¾„)
```bash
export IAN=/mnt/c/Users/ian
sourse ~/.profile
```
ä¹‹åŽä¾¿å¯é€šè¿‡`cd $IAN` æ¥è®¿é—®`win`ä¸‹çš„ç”¨æˆ·ç›®å½•ã€‚å½“ç„¶ï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯åœ¨æ·»åŠ `GoPath`æ—¶æ³¨æ„åˆ°çš„ã€‚


[^_^]:
    2018å¹´6æœˆ5æ—¥10ç‚¹25åˆ†

emm  å…¶å®žåœ¨`/etc/profile` æ–‡ä»¶ä¸‹æ‰æ˜¯ç³»ç»ŸçŽ‹é“

### ps
ä»Šå¹´é¢è¯•è¿˜ç¢°åˆ°ä¸ªé—®è¿™ä¸ªé—®é¢˜ï¼Œè¯´ä»€ä¹ˆæ˜¯å˜é‡..... æŠŠæˆ‘ç»™æ•´è’™äº†.....
ç»“æžœä¸€ç•ªé—®ä¸‹æ‰å‘çŽ°ä»–æƒ³é—®çš„å°±æ˜¯æ”¾åœ¨`/etc/profile`å’Œ`~/.profile`é‡Œæœ‰å•¥åŒºåˆ«ï¼Œ

å•¥æ˜¯`ç³»ç»Ÿ,ç”¨æˆ·,ä¼šè¯`çº§å˜é‡.å”‰.. æœ‰æ—¶å€™çªç„¶å¬åˆ°åŸºæœ¬é—®é¢˜å°±è§‰å¾—å¯¹æ–¹æ˜¯ä¸æ˜¯æœ‰ä»€ä¹ˆæ·±æ„...
[^_^]:
    2021å¹´4æœˆ22æ—¥11ç‚¹52åˆ†

## tmux è™šæ‹Ÿå¤šç»ˆç«¯
ç±»ä¼¼äºŽvimå¤šçª—å£ç¼–è¾‘ä¸€ç±»çš„ä¸œè¥¿ï¼Œemm æˆ–è€…è¯´å›¾å½¢åŒ–`ubuntu`ä½¿ç”¨`ctrl+alt+t`å«å‡ºæ¥çš„ä¸œè¥¿ã€‚è¿™ä¹ˆä¸€å¯¹æ¯”çš„è¯å°±æ˜¯æ— ç•Œé¢åŒ–çš„è™šæ‹Ÿç»ˆç«¯â€”â€”é‚£ä¸ªæ˜¯ç•Œé¢é‡Œçš„è™šæ‹Ÿç»ˆç«¯å˜›ã€‚ ç”¨äºŽè§£å†³`ssh`è¿žæŽ¥è¿œç¨‹å¼€å¯åº”ç”¨ï¼Œæ–­å¼€åŽä¸å…³é—­è¿›ç¨‹çš„æ–¹æ¡ˆã€‚å› ä¸º`nohup`å¥½åƒå¹¶ä¸ç¨³å®šçš„æ ·å­â€¦â€¦
ä¸è¿‡ç”¨èµ·æ¥â€¦ ä¸å¤ªäº†è§£æ€Žä¹ˆè¿™å°±èƒ½å¤ŸæŒä¹…åŒ–äº†â€¦å› ä¸ºæ¯•ç«Ÿæ˜¯è™šæ‹Ÿçª—å£ï¼Œé—´`makethingseasy`ä¸­ï¼Œå…¶å®žâ€¦å¥½åƒâ€¦å¤§æ¦‚â€¦æ²¡ä»€ä¹ˆå…³ç³»å§ã€‚è¿™ä¸¤è€…ã€‚

## æœ€å¤§æ–‡ä»¶æ•°/å•è¿›ç¨‹æœ€å¤§æ–‡ä»¶æ•°
`bump fs.nr_open + fs.max-file to their largest possible values`

```bash
cat /proc/sys/fs/file-max
cat /proc/sys/fs/nr_open
```
ä»Šå¤©(2021-04-22)çœ‹`epoll`çš„æ—¶å€™å¥½å¥‡çœ‹äº†ä¸€ä¸‹,å‘çŽ°æˆ‘çš„fs/file-maxå±…ç„¶æœ‰`9223372036854775807`éœ‡æƒŠä¸€ä¸‹.
